<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>EFOS</title>
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <div class="container">
      <!-- Gear button (acts as gear to open settings and as back button to close settings) -->
      <button id="settingsButton" class="settings-button">
        <img src="images/gear_light.png" alt="Settings">
      </button>

      <!-- Main View -->
      <div id="mainView" class="view visible">
        <h1>EFOS</h1>
        <p class="subtitle">ELTE Felhasználóbarát Open-Source Segéd</p>
        <p class="auto-login-label" data-text="Auto Log In">Auto Log In</p>
        <div class="menu-buttons">
          <!-- Neptun Button with toggle on right -->
          <button id="neptunButton" class="menu-button">
            <div class="btn-label-group">
              <img src="images/neptun_icon.png" alt="Neptun Icon">
              <span class="button-text">Neptun</span>
            </div>
            <div class="toggle-container main-toggle-container">
              <input type="checkbox" id="neptunToggle" class="toggle-input main-toggle">
              <label for="neptunToggle" class="toggle-label"></label>
            </div>
          </button>
          <!-- Canvas Button with toggle on right -->
          <button id="canvasButton" class="menu-button">
            <div class="btn-label-group">
              <img src="images/canvas_icon.png" alt="Canvas Icon">
              <span class="button-text">Canvas</span>
            </div>
            <div class="toggle-container main-toggle-container">
              <input type="checkbox" id="canvasToggle" class="toggle-input main-toggle">
              <label for="canvasToggle" class="toggle-label"></label>
            </div>
          </button>
          <!-- TMS Button with toggle on right -->
          <button id="tmsButton" class="menu-button">
            <div class="btn-label-group">
              <img src="images/tms_icon.png" alt="TMS Icon">
              <span class="button-text">TMS</span>
            </div>
            <div class="toggle-container main-toggle-container">
              <input type="checkbox" id="tmsToggle" class="toggle-input main-toggle">
              <label for="tmsToggle" class="toggle-label"></label>
            </div>
          </button>
          <!-- TMS Focus Mode Row -->
          <div id="tmsFocusRow" class="menu-button focus-mode-row">
            <div class="btn-label-group">
              <img src="images/tms_focus_icon.png" alt="TMS Focus Icon">
              <span class="button-text">TMS Focus Mode</span>
            </div>
            <div class="focus-mode-buttons">
              <button id="activateFocusButton" class="focus-sub-button">Activate</button>
              <button id="infoFocusButton" class="focus-sub-button info-button">ⓘ</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings View (only contains the Direct Student Web toggle and credentials) -->
      <div id="settingsView" class="view hidden">
        <h2>Settings</h2>
        <div class="setting-item">
          <span class="setting-label">Go Direct to Student Web</span>
          <div class="toggle-container settings-toggle-container">
            <input type="checkbox" id="directStudentWebToggle" class="toggle-input settings-toggle">
            <label for="directStudentWebToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="neptun-credentials">
          <label for="neptunCode">Neptun Code:</label>
          <input type="text" id="neptunCode">
          <label for="neptunPassword">Password:</label>
          <input type="password" id="neptunPassword">
          <label for="TMSPassword">TMS Password:</label>
          <input type="password" id="TMSPassword">
          
          <div class="otp-secret-container">
            <label for="otpSecret">OTP Secret:</label>
            <div class="input-wrapper">
              <input type="password" id="otpSecret" placeholder="Enter OTP secret">
              <span id="toggleOtpSecret" class="toggle-otp-secret">
                <img src="images/hidden_light.png" alt="Toggle Visibility">
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Info Modal (for TMS Focus Mode Info) -->
      <div id="infoModal" class="modal">
        <div class="modal-content">
          <span id="closeModal" class="close">&times;</span>
          <p class="guide-text">First, open TMS in your browser, then open your task, and finally click Activate. To undo the effect refresh the page.</p>
        </div>
      </div>
      
      <!-- Footer -->
      <footer id="footer">
        <a href="https://github.com/yaseel/EFOS" target="_blank">
          <!-- GitHub logo as inline SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="github-logo">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 
            0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 
            1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 
            0 0 .67-.21 2.2.82a7.66 7.66 0 012-.27c.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.28.82 
            2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 
            8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          yaseel
        </a>
      </footer>

    </div>
    <script src="popup.js"></script>
  </body>
</html>
